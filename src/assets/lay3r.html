<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>

  <svg version = "1.1" style="display: none">
  <defs>
      <!-- A circle of radius 200 -->
      <circle id = "s1" cx = "20" cy = "20" r = "20" fill = "yellow" stroke = "black" stroke-width = "3"/>
      <!-- An ellipse (rx=200,ry=150) -->
      <ellipse id = "s2" cx = "200" cy = "150" rx = "200" ry = "150" fill = "salmon" stroke = "black" stroke-width = "3"/>

      <path id="house"
         d="M32 18.451l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18v12h-8v-8h-8v8h-8v-12l12-9z"/>

      <path id="diamond" d="M10,0 l25,30 l-25,30 l-25,-30 l25,-30"
         style="stroke: #000000; fill: #6666ff;" />


      <g id="surface1ss">
        <path style=" fill:#F44336;" d="M 45 24 C 45 35.597656 35.597656 45 24 45 C 12.402344 45 3 35.597656 3 24 C 3 12.402344 12.402344 3 24 3 C 35.597656 3 45 12.402344 45 24 "/>
        <path style=" fill:#FFFFFF;" d="M 14 21 L 34 21 L 34 27 L 14 27 Z "/>
      </g>

      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" version="1.1" width="48" height="48">
        <g id="surface1">
          <path style=" fill:#F44336;" d="M 45 24 C 45 35.597656 35.597656 45 24 45 C 12.402344 45 3 35.597656 3 24 C 3 12.402344 12.402344 3 24 3 C 35.597656 3 45 12.402344 45 24 "/>
          <path style=" fill:#FFFFFF;" d="M 14 21 L 34 21 L 34 27 L 14 27 Z "/>
        </g>
      </svg>

  </defs>

</svg>


<svg  style="display: none">
  <defs>
    <g id="decrement">
      <rect x="0", y="-5", width="20",  height="20"/>
      <path d="M 5 0 L 10 10 L 15 0"/>
    </g>
    <g id="increment">
      <rect x="0", y="-5", width="20",  height="20"/>
      <path d="M 5 10 L 10 0 L 15 10"/>
    </g>
  </defs>
</svg>

<style>

body {
  font-size: 100%;
}

.hide1 {
  opacity: 0.1;
}

.hide2 {
  opacity: 0.1;
}

.inc_dec{
  stroke: steelblue;
  stroke-width: 1.5px;
  fill: white;
}

.inc_dec_press{
  stroke: white;
  stroke-width: 1.5px;
  fill: steelblue;
}

.filter_pivot{
  fill: #9ACD66;
}

.filter_pivot_txt{
  fill: #000000;
}


.inc_dec {
  cursor: pointer;
}

.pivot_item_group {
  cursor: pointer;
}

.node {
  cursor: pointer;
}

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node text {
  font: 10px sans-serif;
}

.header {
  font:   23px sans-serif;
  fill: #1B3277;
}

.pivot_level {
  font:   15px sans-serif;
  fill: #3A9238;
}

.pivot_text {
  font: 10px sans-serif;
}


.pivot_zone {
  fill: #FFFFFF ;
}

.pivot_group {
  fill: #FFFFFF;
}

.pivot_item {
  /*fill: #CBF8CD;*/
}

.pivot_nav {
  cursor:pointer;
}

.link {
  fill: none;
  stroke: #ccc;
}

#container {
  margin-top: 0px;
  width: 100%;
  float:left;
}

#layerTree {
  font-size: 1em;
  position:absolute;
  width: 100%;
}

#info {
  font-size: 1em;

  float:right;
}

#logo {
  height: 50px;
}

#version {
float:right;
clear:right;
font-size: .7em;
}

.new_data_button {
    fill: #FFFFFF;
    opacity: 0.0;
    cursor: pointer;
}

.ui-selecting td {
    background: gold;
}
.ui-selected td {
    background: gold;
}

td {

    background: #FFFFF0;

}

tr:first-child td {
    vertical-align: top;
    background-color: #9ACD66;
}

.ui-selectable-helper {
    position: absolute;
    z-index: 100;
    border: 1px solid #CCC;
    background: rgba(200, 200, 200, .5);
}

#dialog{
  display: none;
  height:100%;
}

.ui-dialog {background:#FFFFFA !important}


.dialogWithDropShadow
     {
         -webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
         -moz-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
     }

     .ui-dialog-titlebar-close {
         visibility: hidden;
     }


.dparent { clear: both; }

#dialog_container{
  margin: 20px;
background-color: blue;


}

#inner_container{

    float: left;
    width:100%;
    height:100%;
    overflow: hidden;

}


#pivot_layers_label{
    float: left;
    margin-right: 10px;

}

#pivot_layers{
    float: left;
    margin-bottom:30px;
}

#relations_table_container{
clear:left;
  float: left;

  width:100%;
  height:100%;


}

#relations_table{
  width:100%;
  height:100%;

margin:0px;
  border: 1px solid black;
}

#table_header{
  margin-bottom: 5px;

}

.header_row{
  font-weight: bold;
}

#footer_gap{
  position:absolute;
  bottom:0;


margin-left:100px;
  width:100%;
}
#footer{

  float:right;

  margin-bottom:30px;
  margin-right:140px;

}

</style>

<script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
<script>
var theDialog = null;

function pivot_change(e) {
  //theDialog
  var pivotName = $('#pivotSelect').find(":selected").text();
  var my_data = $("#dialog").data('pivotDict');
  var myFunc = $("#dialog").data('pivotChange');

  var htmlArray = [];

 var t = document.getElementById("relations_table");
 var c = document.getElementById("relations_table_container");

$(t).remove();

  htmlArray.push("<div id='table_header'>Layers that relate to pivot</div>");
  htmlArray.push("<table id='relations_table'>");
  htmlArray.push("<tr class='header_row'>");
  htmlArray.push("<td>LHS layer</td><td>LHS field</td><td>RHS layer</td><td>RHS field</td>");
  htmlArray.push("</tr>");

myFunc(htmlArray, my_data, pivotName);

    htmlArray.push("</table>");



c.innerHTML = htmlArray.join('');
$( "#relations_table" ).selectable({
      selecting: function(event, ui){
            if( $(".ui-selected, .ui-selecting").length > 1){
                  $(ui.selecting).removeClass("ui-selecting");
            }
      }
      ,filter: 'tr:not(:first)'
      ,selected: function(e, ui){
        var tableSelectFunc = $("#dialog").data('relationChange');


        tableSelectFunc(ui.selected);

      }
});

//finally set the footer
var ff = $( "#relations_table" )[0].rows[1];
var rc = theDialog.data('relationChange')
rc(ff);

//
// var new_t = document.createElement("table");
// var new_tr = document.createElement("tr");
// new_t.append(new_tr)
// var new_td = document.createElement("td");
// var txt = document.createTextNode("hello");
// new_td.append(txt);
// new_tr.append(new_td);
// new_td = document.createElement("td");
// txt = document.createTextNode("hello");
// new_td.append(txt);
// new_tr.append(new_td);
//
// new_td = document.createElement("td");
// txt = document.createTextNode("hello");
// new_td.append(txt);
// new_tr.append(new_td);
//
// c.append(new_t);
// //$("#relations_table_container").remove("#relations_table");
// // $(c).remove(t);



}
</script>
<script type="text/javascript" src="neo4j-web.min.js"></script></body>
<div id="container">
  <div id="layerTree"></div>
  <div id="info"><img src="/src/assets/deloitte_log.png" id="logo"></div>
  <div id="version">v: 0.0.1</div>
</div>



<!--dialog box-->
<div class="ui-helper-clearfix dparent">
  <div id="dialog" class="dialogWithDropShadow" >

</div>
</div>
</body


</html>
